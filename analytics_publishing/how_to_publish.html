
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Publishing Reports with Pull Requests (WIP) &#8212; Cal-ITP Data Services</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Where Reports Live (WIP)" href="where_reports_live.html" />
    <link rel="prev" title="How to Publish Analyses (WIP)" href="overview.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-SZB618VNBZ"></script>
<script>
                    window.dataLayer = window.dataLayer || [];
                    function gtag(){ dataLayer.push(arguments); }
                    gtag('js', new Date());
                    gtag('config', 'G-SZB618VNBZ');
                </script>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/calitp_logo_MAIN.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Cal-ITP Data Services</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Data Services Documentation
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Analysts
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../analytics_welcome/overview.html">
   Welcome!
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../analytics_welcome/what_is_calitp.html">
     Cal-ITP Project Information (WIP)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../analytics_welcome/about_our_team.html">
     Team Members (WIP)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../analytics_welcome/how_we_work.html">
     How We Work (WIP)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../analytics_onboarding/overview.html">
   Technical Onboarding
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../analytics_tools/overview.html">
   Introduction to Analytics Tools
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../analytics_tools/tools_quick_links.html">
     Tools Quick Links
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../analytics_tools/bi_dashboards.html">
     Business Insights &amp; Dashboards
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../analytics_tools/notebooks.html">
     Notebooks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../analytics_tools/python_libraries.html">
     Python Libraries
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../analytics_tools/saving_code.html">
     Saving Code
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../analytics_tools/storing_data.html">
     Storing New Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../analytics_tools/data_catalogs.html">
     Using Data Catalogs
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../warehouse/overview.html">
   Introduction to the Warehouse (WIP)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../warehouse/table_naming.html">
     Table Naming
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../warehouse/agencies.html">
     Agency GTFS Feeds
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../warehouse/views.html">
     Creating New Tables (Views)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../warehouse/metrics.html">
     Metric Views
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../warehouse/sql_snippets.html">
     SQL Snippets (WIP)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../datasets_and_tables/overview.html">
   Datasets &amp; Tables (WIP)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../datasets_and_tables/gtfs_schedule.html">
     GTFS Schedule (WIP)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../datasets_and_tables/gtfs_rt.html">
     GTFS Realtime
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../datasets_and_tables/mst_payments.html">
     MST Payments (WIP)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../datasets_and_tables/transitdatabase.html">
     Transit Database
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../datasets_and_tables/views.html">
     Views (WIP)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../datasets_and_tables/tables.html">
     Tables (WIP)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../analytics_examples/overview.html">
   Analysis Examples
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../analytics_examples/warehouse_tutorial.html">
     Tutorial - Querying the Data Warehouse
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../analytics_examples/new_tutorial.html">
     More Complex Queries
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../analytics_examples/sample-catalog-viewer.html">
     Sample Data Catalog
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="overview.html">
   How to Publish Analyses (WIP)
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Publishing Reports with Pull Requests (WIP)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="where_reports_live.html">
     Where Reports Live (WIP)
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Developers
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../airflow/overview.html">
   Airflow
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../airflow/static-schedule-pipeline.html">
     Static Schedule Pipeline
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../airflow/local-setup.html">
     Local Setup
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../airflow/production-maintenance.html">
     Production Maintenance
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../airflow/dags-maintenance.html">
     DAGs Maintenance
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../kubernetes/README.html">
   Kubernetes
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../kubernetes/JupyterHub.html">
     JupyterHub
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ci/README.html">
   CI
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ci/Git-Flow-Services.html">
     Git Flow for Services
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ci/Pipeline-Variables.html">
     Pipeline Variables
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ci/steps/build-docker-image.html">
     build-docker-image
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ci/steps/build-git-notes.html">
     build-git-notes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ci/steps/build-git-tag.html">
     build-git-tag
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ci/steps/configure-build-git-notes.html">
     configure-build-git-notes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ci/steps/configure-docker-login.html">
     configure-docker-login
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ci/steps/configure-git-remote.html">
     configure-git-remote
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ci/steps/release-kube-overlay.html">
     release-kube-overlay
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ci/steps/validate-build-git-tag.html">
     validate-build-git-tag
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ci/steps/validate-clean-worktree.html">
     validate-clean-worktree
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../services/overview.html">
   Services
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../services/gtfs-ckan-uploader.html">
     GTFS CKAN Uploader
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../services/gtfs-rt-archive.html">
     gtfs-rt-archive
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contribute to the Docs!
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../contribute/overview.html">
   Getting Started
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../contribute/contribute-best-practices.html">
     Best Practices
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../contribute/submitting_changes.html">
     Submitting Changes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../contribute/content_types.html">
     Common Content
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/analytics_publishing/how_to_publish.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/cal-itp/data-infra/"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/cal-itp/data-infra//issues/new?title=Issue%20on%20page%20%2Fanalytics_publishing/how_to_publish.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/cal-itp/data-infra/edit/main/docs/analytics_publishing/how_to_publish.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#types-of-reports">
   Types of Reports
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#static-visualizations">
     Static Visualizations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#html-visualizations">
     HTML Visualizations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dashboards">
     Dashboards
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#publishing-reports">
     Publishing Reports
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#scheduling-reports">
     Scheduling Reports
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Publishing Reports with Pull Requests (WIP)</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#types-of-reports">
   Types of Reports
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#static-visualizations">
     Static Visualizations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#html-visualizations">
     HTML Visualizations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dashboards">
     Dashboards
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#publishing-reports">
     Publishing Reports
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#scheduling-reports">
     Scheduling Reports
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="publishing-reports-with-pull-requests-wip">
<h1>Publishing Reports with Pull Requests (WIP)<a class="headerlink" href="#publishing-reports-with-pull-requests-wip" title="Permalink to this headline">¶</a></h1>
<p>Analysts have a variety of tools available to publish their final deliverables. With iterative work, analysts can implement certain best practices within these bounds to do as much as is programmatically practical. The workflow will look different depending on these factors:</p>
<ul class="simple">
<li><p>Are visualizations static or interactive?</p></li>
<li><p>Does the deliverable need to be updated on a specified frequency or a one-off analysis?</p></li>
<li><p>Is the deliverable format PDF, HTML, interactive dashboard, or a slide deck?</p></li>
</ul>
<p>Analysts can string together a combination of these solutions:</p>
<ul class="simple">
<li><p>Static visualizations can be inserted directly into the slide deck</p></li>
<li><p>HTML visualizations can be rendered in GitHub Pages and embedded as a URL into slide deck</p></li>
<li><p>Static, HTML reports can be rendered in GitHub Pages.</p></li>
<li><p>Reports can be rendered as PDFs and emailed to stakeholders.</p></li>
<li><p>Interactive dashboards should be hosted in Metabase to share with external stakeholders.</p></li>
<li><p>Use Airflow to schedule publishing reports, pushing data backing a dashboard, or emailing PDFs.</p></li>
</ul>
<div class="section" id="types-of-reports">
<h2>Types of Reports<a class="headerlink" href="#types-of-reports" title="Permalink to this headline">¶</a></h2>
<div class="section" id="static-visualizations">
<h3>Static Visualizations<a class="headerlink" href="#static-visualizations" title="Permalink to this headline">¶</a></h3>
<p>Static visualizations should be created in a Jupyter Notebook, saved locally (in JupyterHub), and checked into GitHub.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="c1"># matplotlib or seaborn</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plot</span>
<span class="kn">import</span> <span class="nn">seaborn</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;../my-visualization.png&quot;</span><span class="p">)</span>

<span class="c1"># altair</span>
<span class="kn">import</span> <span class="nn">altair</span> <span class="k">as</span> <span class="nn">alt</span>
<span class="kn">import</span> <span class="nn">altair_saver</span>
<span class="n">chart</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;../my-visualization.png&quot;</span><span class="p">)</span>

<span class="c1"># plotnine</span>
<span class="kn">from</span> <span class="nn">plotnine</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">chart</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;../my-visualization.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="html-visualizations">
<h3>HTML Visualizations<a class="headerlink" href="#html-visualizations" title="Permalink to this headline">¶</a></h3>
<p>Visualizations that benefit from limited interactivity, such as displaying tooltips on hover or zooming in / out and scrolling can be rendered within GitHub pages.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">folium</span></code> map can be saved as a local HTML file and checked into GitHub (<code class="docutils literal notranslate"><span class="pre">ipyleaflet</span></code> must be rendered directly in the notebook). Many chart packages, including <code class="docutils literal notranslate"><span class="pre">altair</span></code>, <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, and <code class="docutils literal notranslate"><span class="pre">plotly</span></code> allow you to export as HTML.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># altair</span>
<span class="kn">import</span> <span class="nn">altair</span> <span class="k">as</span> <span class="nn">alt</span>
<span class="n">chart</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;../my-visualization.html&quot;</span><span class="p">)</span>

<span class="c1"># matplotlib (by encoding it)</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>

<span class="n">tmpfile</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">tmpfile</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;png&#39;</span><span class="p">)</span>
<span class="n">encoded</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">tmpfile</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

<span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;Some html head&#39;</span> <span class="o">+</span> <span class="s1">&#39;&lt;img src=</span><span class="se">\&#39;</span><span class="s1">data:image/png;base64,</span><span class="si">{}</span><span class="se">\&#39;</span><span class="s1">&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">encoded</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;Some more html&#39;</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;test.html&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>

<span class="c1"># plotly</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="n">fig</span><span class="o">.</span><span class="n">write_html</span><span class="p">(</span><span class="s2">&quot;../my-visualization.html&quot;</span><span class="p">)</span>

<span class="c1"># folium</span>
<span class="kn">import</span> <span class="nn">folium</span>
<span class="n">fig</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;../my-visualization.html&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Use GitHub pages to display these HTML pages.</p>
<ol class="simple">
<li><p>Go to the repo’s <a class="reference external" href="https://github.com/cal-itp/data-analyses/settings">settings</a></p></li>
<li><p>Navigate to <code class="docutils literal notranslate"><span class="pre">Pages</span></code> on the left</p></li>
<li><p>Change the branch GH pages is sourcing from: <code class="docutils literal notranslate"><span class="pre">main</span></code> to <code class="docutils literal notranslate"><span class="pre">my-current-branch</span></code></p></li>
<li><p>Embed the URL into the slides. Example URL: <a class="reference external" href="https://docs.calitp.org/data-analyses/PROJECT-FOLDER/MY-VISUALIZATION.html">https://docs.calitp.org/data-analyses/PROJECT-FOLDER/MY-VISUALIZATION.html</a></p></li>
<li><p>Once a PR is ready and merged, the GH pages can be changed back to source from <code class="docutils literal notranslate"><span class="pre">main</span></code>. The URL is preserved within the slide deck.</p></li>
<li><p>Note: If analysts working on different branches want to display GH pages, one of them needs to merge in <code class="docutils literal notranslate"><span class="pre">main</span></code>, the other needs to do a <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rebase</span></code>, and then can choose <code class="docutils literal notranslate"><span class="pre">my-other-branch</span></code> as the GH pages source.</p></li>
</ol>
<p>Ex: <a class="reference external" href="https://docs.calitp.org/data-analyses/bus_service_increase/img/arrivals_pc_high.html">Service Density Map</a></p>
</div>
<div class="section" id="dashboards">
<h3>Dashboards<a class="headerlink" href="#dashboards" title="Permalink to this headline">¶</a></h3>
<p>Interactive charts should be displayed in Metabase. Using Voila on Jupyter Notebooks works locally, but doesn’t allow for sharing with external stakeholders. The data cleaning and processing should still be done within Python scripts or Jupyter notebooks. The processed dataset backing the dashboard should be exported to a Google Cloud Storage bucket.</p>
<p>An <a class="reference external" href="https://github.com/cal-itp/data-infra/tree/main/airflow/dags">Airflow DAG</a> needs to be set up to copy the processed dataset into the data warehouse. Metabase can only source data from the data warehouse. The dashboard visualizations can be set up in Metabase, remain interactive, and easily shared to external stakeholders.</p>
<p>Any tweaks to the data processing steps are easily done in scripts and notebooks, and it ensures that the visualizations in the dashboard remain updated with little friction.</p>
<p>Ex: <a class="reference external" href="https://dashboards.calitp.org/dashboard/3-payments-performance-dashboard?transit_provider=mst">Payments Dashboard</a></p>
</div>
<div class="section" id="publishing-reports">
<h3>Publishing Reports<a class="headerlink" href="#publishing-reports" title="Permalink to this headline">¶</a></h3>
<p>Reports can be shared as HTML webpages or PDFs.</p>
<p>A Jupyter Notebook can be converted to HTML with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">papermill</span> <span class="k">as</span> <span class="nn">pm</span>
<span class="kn">import</span> <span class="nn">subprocess</span>

<span class="n">OUTPUT_FILENAME</span> <span class="o">=</span> <span class="s2">&quot;sample-report&quot;</span>

<span class="n">pm</span><span class="o">.</span><span class="n">execute_notebook</span><span class="p">(</span>
    <span class="c1"># notebook to execute</span>
    <span class="s1">&#39;../my-notebook.ipynb&#39;</span><span class="p">,</span>
    <span class="c1"># if needed, rename the notebook as something different</span>
    <span class="c1"># this will be the filename that is used when converting to HTML or PDF</span>
    <span class="sa">f</span><span class="s1">&#39;../</span><span class="si">{</span><span class="n">OUTPUT_FILENAME</span><span class="si">}</span><span class="s1">.ipynb&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># shell out, run NB Convert</span>
<span class="n">OUTPUT_FORMAT</span> <span class="o">=</span> <span class="s1">&#39;html&#39;</span>
<span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span>
    <span class="s2">&quot;jupyter&quot;</span><span class="p">,</span>
    <span class="s2">&quot;nbconvert&quot;</span><span class="p">,</span>
    <span class="s2">&quot;--to&quot;</span><span class="p">,</span>
    <span class="n">OUTPUT_FORMAT</span><span class="p">,</span>
    <span class="s2">&quot;--no-input&quot;</span><span class="p">,</span>
    <span class="s2">&quot;--no-prompt&quot;</span><span class="p">,</span>
    <span class="sa">f</span><span class="s2">&quot;../</span><span class="si">{</span><span class="n">OUTPUT_FILENAME</span><span class="si">}</span><span class="s2">.ipynb&quot;</span><span class="p">,</span>
<span class="p">])</span>
</pre></div>
</div>
<p>A Jupyter Notebook can be converted to PDF for email distribution with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Similar as converting to HTML, but change the output_format</span>
<span class="c1"># shell out, run NB Convert</span>
<span class="n">OUTPUT_FORMAT</span> <span class="o">=</span> <span class="s1">&#39;PDFviaHTML&#39;</span>
<span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span>
    <span class="s2">&quot;jupyter&quot;</span><span class="p">,</span>
    <span class="s2">&quot;nbconvert&quot;</span><span class="p">,</span>
    <span class="s2">&quot;--to&quot;</span><span class="p">,</span>
    <span class="n">OUTPUT_FORMAT</span><span class="p">,</span>
    <span class="s2">&quot;--no-input&quot;</span><span class="p">,</span>
    <span class="s2">&quot;--no-prompt&quot;</span><span class="p">,</span>
    <span class="sa">f</span><span class="s2">&quot;../</span><span class="si">{</span><span class="n">OUTPUT_FILENAME</span><span class="si">}</span><span class="s2">.ipynb&quot;</span><span class="p">,</span>
<span class="p">])</span>

</pre></div>
</div>
</div>
<div class="section" id="scheduling-reports">
<h3>Scheduling Reports<a class="headerlink" href="#scheduling-reports" title="Permalink to this headline">¶</a></h3>
<p>Use Airflow to schedule publishing reports at some specified frequency. Run a Python script that uses <code class="docutils literal notranslate"><span class="pre">papermill</span></code> to execute a notebook and convert to HTML or PDF.</p>
<p>Ex: Reports Cal-ITP</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./analytics_publishing"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="overview.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">How to Publish Analyses (WIP)</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="where_reports_live.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Where Reports Live (WIP)</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Cal-ITP<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>